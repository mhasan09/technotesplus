{"remainingRequest":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\src\\components\\CreateNote.vue?vue&type=template&id=4a66ca3e","dependencies":[{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\src\\components\\CreateNote.vue","mtime":1629118719468},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1629211688771},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1629211693788},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1629211696616},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1629211688771},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1629211694599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdk1vZGVsVGV4dCBhcyBfdk1vZGVsVGV4dCwgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIHdpdGhEaXJlY3RpdmVzIGFzIF93aXRoRGlyZWN0aXZlcywgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrIH0gZnJvbSAidnVlIjsKdmFyIF9ob2lzdGVkXzEgPSB7CiAgY2xhc3M6ICJjb2x1bW5zIGlzLW1vYmlsZSIKfTsKdmFyIF9ob2lzdGVkXzIgPSB7CiAgY2xhc3M6ICJjb2x1bW4gaXMtaGFsZiBpcy1vZmZzZXQtb25lLXF1YXJ0ZXIiCn07CnZhciBfaG9pc3RlZF8zID0gewogIGNsYXNzOiAiZmllbGQiCn07CnZhciBfaG9pc3RlZF80ID0gewogIGNsYXNzOiAiY29udHJvbCIKfTsKdmFyIF9ob2lzdGVkXzUgPSB7CiAgY2xhc3M6ICJidXR0b25zIgp9OwpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzEsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8yLCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMywgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzQsIFtfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZUVsZW1lbnRWTm9kZSgidGV4dGFyZWEiLCB7CiAgICBjbGFzczogInRleHRhcmVhIGlzLW1lZGl1bSBpcy1wcmltYXJ5IiwKICAgIHBsYWNlaG9sZGVyOiAiTGV0J3MgbGlzdCB3aGF0IHRvIGRvICEhISIsCiAgICBpZDogIm5vdGUiLAogICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMF0gfHwgKF9jYWNoZVswXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuICRzZXR1cC5zdGF0ZS5ub3RlID0gJGV2ZW50OwogICAgfSkKICB9LCBudWxsLCA1MTIKICAvKiBORUVEX1BBVENIICovCiAgKSwgW1tfdk1vZGVsVGV4dCwgJHNldHVwLnN0YXRlLm5vdGVdXSldKV0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF81LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiYnV0dG9uIiwgewogICAgY2xhc3M6ICJidXR0b24gaXMtcHJpbWFyeSIsCiAgICBvbkNsaWNrOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICRzZXR1cC5oYW5kbGVBZGROb3RlICYmICRzZXR1cC5oYW5kbGVBZGROb3RlLmFwcGx5KCRzZXR1cCwgYXJndW1lbnRzKTsKICAgIH0pCiAgfSwgIiBBZGQgTm90ZXMgIildKV0pXSk7Cn0="},{"version":3,"sources":["C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\src\\components\\CreateNote.vue"],"names":[],"mappings":";;AACO,EAAA,KAAK,EAAC;;;AACJ,EAAA,KAAK,EAAC;;;AACJ,EAAA,KAAK,EAAC;;;AACJ,EAAA,KAAK,EAAC;;;AASR,EAAA,KAAK,EAAC;;;uBAZf,mBAAA,CAkBM,KAlBN,EAAA,UAAA,EAkBM,CAjBJ,mBAAA,CAgBM,KAhBN,EAAA,UAAA,EAgBM,CAfJ,mBAAA,CASM,KATN,EAAA,UAAA,EASM,CARJ,mBAAA,CAOM,KAPN,EAAA,UAAA,EAOM,C,gBANJ,mBAAA,CAKY,UALZ,EAKY;AAJV,IAAA,KAAK,EAAC,+BAII;AAHV,IAAA,WAAW,EAAC,2BAGF;AAFV,IAAA,EAAE,EAAC,MAEO;;aADD,MAAA,CAAA,KAAA,CAAM,IAAN,GAAU,M;;AACT,GALZ,E,IAAA,E;;AAAA,G,iBAIW,MAAA,CAAA,KAAA,CAAM,I,GAEb,CAPN,CAQI,CATN,CAeI,EALJ,mBAAA,CAIM,KAJN,EAAA,UAAA,EAIM,CAHJ,mBAAA,CAES,QAFT,EAES;AAFD,IAAA,KAAK,EAAC,mBAEL;AAF0B,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,MAAA,CAAA,aAAA,IAAA,MAAA,CAAA,aAAA,OAAA,MAAA,YAAF;AAAA,KAAA;AAE/B,GAFT,EAAyD,aAAzD,CAGI,CAJN,CAKI,CAhBN,CAiBI,CAlBN,C","sourcesContent":["<template>\r\n  <div class=\"columns is-mobile\">\r\n    <div class=\"column is-half is-offset-one-quarter\">\r\n      <div class=\"field\">\r\n        <div class=\"control\">\r\n          <textarea\r\n            class=\"textarea is-medium is-primary\"\r\n            placeholder=\"Let's list what to do !!!\"\r\n            id=\"note\"\r\n            v-model=\"state.note\"\r\n          ></textarea>\r\n        </div>\r\n      </div>\r\n      <div class=\"buttons\">\r\n        <button class=\"button is-primary\" @click=\"handleAddNote\">\r\n          Add Notes\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, computed } from \"vue\";\r\nimport axios from \"axios\";\r\nimport { backend } from \"@/utils\";\r\nimport router from \"@/router\";\r\n\r\nexport default {\r\n  name: \"CreateNote\",\r\n  setup() {\r\n    const state = reactive({\r\n      note: null,\r\n    });\r\n    const handleAddNote = async (_) => {\r\n      try {\r\n           // Let's get the initial response first\r\n            // If it fails then I need to send the refresh token and try again\r\n            // If it fails again then that means the refresh token expired and I can log out the user\r\n        const response = await axios.post(\r\n          `${backend}/api/note/create`,\r\n          { content: state.note },\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.accessToken}`,\r\n            },\r\n          }\r\n        );\r\n        if (response.status === 200) {\r\n          console.log(\"note is added\");\r\n          Toastify({\r\n              text: \"Note added\",\r\n              duration: 3000,\r\n              destination: \"https://github.com/apvarun/toastify-js\",\r\n              newWindow: true,\r\n              close: true,\r\n              gravity: \"bottom\", // `top` or `bottom`\r\n              position: \"right\", // `left`, `center` or `right`\r\n              backgroundColor: \"linear-gradient(to right, #00b09b, #96c93d)\",\r\n              stopOnFocus: true, // Prevents dismissing of toast on hover\r\n              onClick: function(){} // Callback after click\r\n            }).showToast();\r\n          state.note = null;\r\n          await router.push({ name: \"Home\" });\r\n        }\r\n      } catch (err) {\r\n        if (err.status === 500) {\r\n          console.log(\"Check your internet connection!\");\r\n        } else {\r\n          try {\r\n            const refresh = await axios.post(`${backend}/api/token/refresh/`, {\r\n              refresh: localStorage.refreshToken,\r\n            });\r\n            await localStorage.setItem(\"accessToken\", refresh.data.access);\r\n            const refreshResponse = await axios.post(\r\n              `${backend}/api/note/create`,{ content: state.note },\r\n              {\r\n                headers: {\r\n                  Authorization: `Bearer ${localStorage.accessToken}`,\r\n                },\r\n              }\r\n            );\r\n            if (refreshResponse.status === 200) {\r\n              state.note = null;\r\n            }\r\n          } catch (err) {\r\n            localStorage.removeItem(\"accessToken\");\r\n            localStorage.removeItem(\"refreshToken\");\r\n            await router.push({ name: \"Login\" });\r\n          }\r\n        }\r\n      }\r\n    };\r\n    return {\r\n      state,\r\n      handleAddNote,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"],"sourceRoot":""}]}