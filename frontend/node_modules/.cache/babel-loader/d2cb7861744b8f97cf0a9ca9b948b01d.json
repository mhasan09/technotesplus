{"remainingRequest":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\src\\views\\Home.vue?vue&type=template&id=fae5bece","dependencies":[{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\src\\views\\Home.vue","mtime":1629204189244},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1629211688771},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1629211693788},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1629211696616},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1629211688771},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1629211694599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdG9EaXNwbGF5U3RyaW5nIGFzIF90b0Rpc3BsYXlTdHJpbmcsIGNyZWF0ZUVsZW1lbnRWTm9kZSBhcyBfY3JlYXRlRWxlbWVudFZOb2RlLCByZW5kZXJMaXN0IGFzIF9yZW5kZXJMaXN0LCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jaywgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrIH0gZnJvbSAidnVlIjsKdmFyIF9ob2lzdGVkXzEgPSB7CiAgY2xhc3M6ICJjb250YWluZXIiCn07CnZhciBfaG9pc3RlZF8yID0gewogIGNsYXNzOiAiY29sdW1ucyBpcy1tb2JpbGUiCn07CnZhciBfaG9pc3RlZF8zID0gewogIGNsYXNzOiAiY29sdW1uIGlzLWhhbGYgaXMtb2Zmc2V0LW9uZS1xdWFydGVyIgp9Owp2YXIgX2hvaXN0ZWRfNCA9IHsKICBjbGFzczogImdyZWV0aW5ncyIKfTsKCnZhciBfaG9pc3RlZF81ID0gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoInAiLCB7CiAgY2xhc3M6ICJtYi00Igp9LCBudWxsLCAtMQovKiBIT0lTVEVEICovCik7CgpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHZhciBfY29tcG9uZW50X05vdGUgPSBfcmVzb2x2ZUNvbXBvbmVudCgiTm90ZSIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzMsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJzdHJvbmciLCBfaG9pc3RlZF80LCAiSGksIiArIF90b0Rpc3BsYXlTdHJpbmcoJHNldHVwLnN0YXRlLnVzZXIudXNlcm5hbWUpLCAxCiAgLyogVEVYVCAqLwogICksIF9ob2lzdGVkXzVdKV0pLCAoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUVsZW1lbnRCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KCRzZXR1cC5zdGF0ZS5ub3RlcywgZnVuY3Rpb24gKG5vdGUpIHsKICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X05vdGUsIHsKICAgICAga2V5OiBub3RlLmlkLAogICAgICBpZDogbm90ZS5pZCwKICAgICAgbm90ZTogbm90ZS5DT05URU5ULAogICAgICBvblJlbW92ZU5vdGU6ICRzZXR1cC5oYW5kbGVSZW1vdmVOb3RlCiAgICB9LCBudWxsLCA4CiAgICAvKiBQUk9QUyAqLwogICAgLCBbImlkIiwgIm5vdGUiLCAib25SZW1vdmVOb3RlIl0pOwogIH0pLCAxMjgKICAvKiBLRVlFRF9GUkFHTUVOVCAqLwogICkpXSk7Cn0="},{"version":3,"sources":["C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\src\\views\\Home.vue"],"names":[],"mappings":";;AACO,EAAA,KAAK,EAAC;;;AACJ,EAAA,KAAK,EAAC;;;AACJ,EAAA,KAAK,EAAC;;;AACD,EAAA,KAAK,EAAC;;;8BACd,mBAAA,CAAoB,GAApB,EAAoB;AAAjB,EAAA,KAAK,EAAC;AAAW,CAApB,EAAe,IAAf,EAAe,CAAA;AAAA;AAAf,C;;;;;uBAJN,mBAAA,CAeM,KAfN,EAAA,UAAA,EAeM,CAdJ,mBAAA,CAMM,KANN,EAAA,UAAA,EAMM,CALJ,mBAAA,CAIM,KAJN,EAAA,UAAA,EAIM,CAHJ,mBAAA,CAA+D,QAA/D,EAAA,UAAA,EAA0B,QAAG,gBAAA,CAAG,MAAA,CAAA,KAAA,CAAM,IAAN,CAAW,QAAd,CAA7B,EAAmD;AAAA;AAAnD,GAGI,EAFJ,UAEI,CAJN,CAKI,CANN,CAcI,G,kBAPJ,mBAAA,CAME,SANF,EAME,IANF,EAME,WAAA,CALe,MAAA,CAAA,KAAA,CAAM,KAKrB,EAL0B,UAAnB,IAAmB,EAAf;yBADb,YAAA,CAME,eANF,EAME;AAJC,MAAA,GAAG,EAAE,IAAI,CAAC,EAIX;AAHC,MAAA,EAAE,EAAE,IAAI,CAAC,EAGV;AAFC,MAAA,IAAI,EAAE,IAAI,CAAC,OAEZ;AADC,MAAA,YAAU,EAAE,MAAA,CAAA;AACb,KANF,E,IAAA,E;;AAAA,M,8BAAA,C;GAME,CANF,E;;AAAA,GAOI,EAfN,C","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"columns is-mobile\">\r\n      <div class=\"column is-half is-offset-one-quarter\">\r\n        <strong class=\"greetings\">Hi,{{ state.user.username }}</strong>\r\n        <p class=\"mb-4\"></p>\r\n        \r\n      </div>\r\n    </div>\r\n    <Note\r\n      v-for=\"note in state.notes\"\r\n      :key=\"note.id\"\r\n      :id=\"note.id\"\r\n      :note=\"note.CONTENT\"\r\n      @removeNote=\"handleRemoveNote\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, onMounted } from \"vue\";\r\nimport axios from \"axios\";\r\nimport Note from \"../components/Note.vue\";\r\nimport { backend } from \"@/utils\";\r\nimport router from \"@/router\";\r\nimport { useRouter } from \"vue-router\";\r\nexport default {\r\n  components: {\r\n    Note,\r\n  },\r\n\r\n  name: \"Notes\",\r\n  setup(props) {\r\n    const state = reactive({\r\n      notes: [],\r\n      user: [],\r\n    });\r\n\r\n    // We get all the notes for the user\r\n    const getNotes = async (_) => {\r\n      try {\r\n        const response = await axios.get(`${backend}/api/user/notes`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.accessToken}`,\r\n          },\r\n        });\r\n        if (response.status === 200) {\r\n          state.notes = response.data;\r\n        }\r\n      } catch (err) {\r\n        if (err.status === 500) {\r\n          //Throw error\r\n        } else {\r\n          try {\r\n            const refresh = await axios.post(`${backend}/api/token/refresh/`, {\r\n              refresh: localStorage.refreshToken,\r\n            });\r\n            localStorage.setItem(\"accessToken\", refresh.data.access);\r\n            const refreshResponse = await axios.get(\r\n              `${backend}/api/user/notes`,\r\n              {\r\n                headers: {\r\n                  Authorization: `Bearer ${refresh.data.access}`,\r\n                },\r\n              }\r\n            );\r\n            if (refreshResponse.status === 200) {\r\n              state.notes = refreshResponse.data;\r\n            }\r\n          } catch {\r\n            localStorage.removeItem(\"accessToken\");\r\n            localStorage.removeItem(\"refreshToken\");\r\n            await router.push({ name: \"Login\" });\r\n          }\r\n        }\r\n      }\r\n    };\r\n    onMounted(() => {\r\n      getNotes();\r\n    });\r\n\r\n    const getUser = async (_) => {\r\n      try {\r\n        const response = await axios.get(`${backend}/api/get_user`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.accessToken}`,\r\n          },\r\n        });\r\n        if (response.status === 200) {\r\n          state.user = response.data;\r\n        }\r\n      } catch (err) {\r\n        if (err.status === 500) {\r\n          //Throw error\r\n        } else {\r\n          try {\r\n            const refresh = await axios.post(`${backend}/api/token/refresh/`, {\r\n              refresh: localStorage.refreshToken,\r\n            });\r\n            localStorage.setItem(\"accessToken\", refresh.data.access);\r\n            const refreshResponse = await axios.get(`${backend}/api/get_user`, {\r\n              headers: {\r\n                Authorization: `Bearer ${refresh.data.access}`,\r\n              },\r\n            });\r\n            if (refreshResponse.status === 200) {\r\n              state.user = refreshResponse.data;\r\n            }\r\n          } catch {\r\n            localStorage.removeItem(\"accessToken\");\r\n            localStorage.removeItem(\"refreshToken\");\r\n            await router.push({ name: \"Login\" });\r\n          }\r\n        }\r\n      }\r\n    };\r\n    onMounted(() => {\r\n      getUser();\r\n    });\r\n\r\n    // Note component sends us the Id of the deleted note and we just remove\r\n    // it from the list\r\n    // const handleRemoveNote = childData => state.notes = state.notes.filter(note => note.id !== childData.id );\r\n    const handleRemoveNote = (childData) => {\r\n      state.notes = state.notes.filter((note) => note.id !== childData.id);\r\n    };\r\n\r\n    return {\r\n      state,\r\n      handleRemoveNote,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.greetings {\r\n  font-size: 23px;\r\n}\r\n.is-right{\r\n  margin-right: 5%;\r\n}\r\n</style>"],"sourceRoot":""}]}