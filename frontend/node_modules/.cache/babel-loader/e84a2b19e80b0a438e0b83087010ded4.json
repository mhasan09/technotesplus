{"remainingRequest":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\src\\components\\CreateNote.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\src\\components\\CreateNote.vue","mtime":1629118719468},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1629211688771},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1629211693788},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1629211688771},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1629211694599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL01haGFidWIvUHljaGFybVByb2plY3RzL3RlY2hOb3Rlc19maW5hbC9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgcmVhY3RpdmUsIGNvbXB1dGVkIH0gZnJvbSAidnVlIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgYmFja2VuZCB9IGZyb20gIkAvdXRpbHMiOwppbXBvcnQgcm91dGVyIGZyb20gIkAvcm91dGVyIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDcmVhdGVOb3RlIiwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgc3RhdGUgPSByZWFjdGl2ZSh7CiAgICAgIG5vdGU6IG51bGwKICAgIH0pOwoKICAgIHZhciBoYW5kbGVBZGROb3RlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoXykgewogICAgICAgIHZhciByZXNwb25zZSwgcmVmcmVzaCwgcmVmcmVzaFJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgiIi5jb25jYXQoYmFja2VuZCwgIi9hcGkvbm90ZS9jcmVhdGUiKSwgewogICAgICAgICAgICAgICAgICBjb250ZW50OiBzdGF0ZS5ub3RlCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KGxvY2FsU3RvcmFnZS5hY2Nlc3NUb2tlbikKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIShyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygibm90ZSBpcyBhZGRlZCIpOwogICAgICAgICAgICAgICAgVG9hc3RpZnkoewogICAgICAgICAgICAgICAgICB0ZXh0OiAiTm90ZSBhZGRlZCIsCiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAwLAogICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogImh0dHBzOi8vZ2l0aHViLmNvbS9hcHZhcnVuL3RvYXN0aWZ5LWpzIiwKICAgICAgICAgICAgICAgICAgbmV3V2luZG93OiB0cnVlLAogICAgICAgICAgICAgICAgICBjbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgZ3Jhdml0eTogImJvdHRvbSIsCiAgICAgICAgICAgICAgICAgIC8vIGB0b3BgIG9yIGBib3R0b21gCiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAicmlnaHQiLAogICAgICAgICAgICAgICAgICAvLyBgbGVmdGAsIGBjZW50ZXJgIG9yIGByaWdodGAKICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAibGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjMDBiMDliLCAjOTZjOTNkKSIsCiAgICAgICAgICAgICAgICAgIHN0b3BPbkZvY3VzOiB0cnVlLAogICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50cyBkaXNtaXNzaW5nIG9mIHRvYXN0IG9uIGhvdmVyCiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7fSAvLyBDYWxsYmFjayBhZnRlciBjbGljawoKICAgICAgICAgICAgICAgIH0pLnNob3dUb2FzdCgpOwogICAgICAgICAgICAgICAgc3RhdGUubm90ZSA9IG51bGw7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiAiSG9tZSIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwoKICAgICAgICAgICAgICAgIGlmICghKF9jb250ZXh0LnQwLnN0YXR1cyA9PT0gNTAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJDaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24hIik7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzY7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxODsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCIiLmNvbmNhdChiYWNrZW5kLCAiL2FwaS90b2tlbi9yZWZyZXNoLyIpLCB7CiAgICAgICAgICAgICAgICAgIHJlZnJlc2g6IGxvY2FsU3RvcmFnZS5yZWZyZXNoVG9rZW4KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgcmVmcmVzaCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnNldEl0ZW0oImFjY2Vzc1Rva2VuIiwgcmVmcmVzaC5kYXRhLmFjY2Vzcyk7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgiIi5jb25jYXQoYmFja2VuZCwgIi9hcGkvbm90ZS9jcmVhdGUiKSwgewogICAgICAgICAgICAgICAgICBjb250ZW50OiBzdGF0ZS5ub3RlCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KGxvY2FsU3RvcmFnZS5hY2Nlc3NUb2tlbikKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgICByZWZyZXNoUmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZWZyZXNoUmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgc3RhdGUubm90ZSA9IG51bGw7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzA7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MSA9IF9jb250ZXh0WyJjYXRjaCJdKDE4KTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJhY2Nlc3NUb2tlbiIpOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInJlZnJlc2hUb2tlbiIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM2OwogICAgICAgICAgICAgICAgcmV0dXJuIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgbmFtZTogIkxvZ2luIgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDEyXSwgWzE4LCAzMF1dKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZUFkZE5vdGUoX3gpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHJldHVybiB7CiAgICAgIHN0YXRlOiBzdGF0ZSwKICAgICAgaGFuZGxlQWRkTm90ZTogaGFuZGxlQWRkTm90ZQogICAgfTsKICB9Cn07"},{"version":3,"sources":["C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\src\\components\\CreateNote.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"columns is-mobile\">\r\n    <div class=\"column is-half is-offset-one-quarter\">\r\n      <div class=\"field\">\r\n        <div class=\"control\">\r\n          <textarea\r\n            class=\"textarea is-medium is-primary\"\r\n            placeholder=\"Let's list what to do !!!\"\r\n            id=\"note\"\r\n            v-model=\"state.note\"\r\n          ></textarea>\r\n        </div>\r\n      </div>\r\n      <div class=\"buttons\">\r\n        <button class=\"button is-primary\" @click=\"handleAddNote\">\r\n          Add Notes\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, computed } from \"vue\";\r\nimport axios from \"axios\";\r\nimport { backend } from \"@/utils\";\r\nimport router from \"@/router\";\r\n\r\nexport default {\r\n  name: \"CreateNote\",\r\n  setup() {\r\n    const state = reactive({\r\n      note: null,\r\n    });\r\n    const handleAddNote = async (_) => {\r\n      try {\r\n           // Let's get the initial response first\r\n            // If it fails then I need to send the refresh token and try again\r\n            // If it fails again then that means the refresh token expired and I can log out the user\r\n        const response = await axios.post(\r\n          `${backend}/api/note/create`,\r\n          { content: state.note },\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.accessToken}`,\r\n            },\r\n          }\r\n        );\r\n        if (response.status === 200) {\r\n          console.log(\"note is added\");\r\n          Toastify({\r\n              text: \"Note added\",\r\n              duration: 3000,\r\n              destination: \"https://github.com/apvarun/toastify-js\",\r\n              newWindow: true,\r\n              close: true,\r\n              gravity: \"bottom\", // `top` or `bottom`\r\n              position: \"right\", // `left`, `center` or `right`\r\n              backgroundColor: \"linear-gradient(to right, #00b09b, #96c93d)\",\r\n              stopOnFocus: true, // Prevents dismissing of toast on hover\r\n              onClick: function(){} // Callback after click\r\n            }).showToast();\r\n          state.note = null;\r\n          await router.push({ name: \"Home\" });\r\n        }\r\n      } catch (err) {\r\n        if (err.status === 500) {\r\n          console.log(\"Check your internet connection!\");\r\n        } else {\r\n          try {\r\n            const refresh = await axios.post(`${backend}/api/token/refresh/`, {\r\n              refresh: localStorage.refreshToken,\r\n            });\r\n            await localStorage.setItem(\"accessToken\", refresh.data.access);\r\n            const refreshResponse = await axios.post(\r\n              `${backend}/api/note/create`,{ content: state.note },\r\n              {\r\n                headers: {\r\n                  Authorization: `Bearer ${localStorage.accessToken}`,\r\n                },\r\n              }\r\n            );\r\n            if (refreshResponse.status === 200) {\r\n              state.note = null;\r\n            }\r\n          } catch (err) {\r\n            localStorage.removeItem(\"accessToken\");\r\n            localStorage.removeItem(\"refreshToken\");\r\n            await router.push({ name: \"Login\" });\r\n          }\r\n        }\r\n      }\r\n    };\r\n    return {\r\n      state,\r\n      handleAddNote,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"],"sourceRoot":""}]}