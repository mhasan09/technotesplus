{"remainingRequest":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\src\\components\\CreateNote.vue?vue&type=template&id=4a66ca3e","dependencies":[{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\src\\components\\CreateNote.vue","mtime":1629118719468},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1629211688771},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1629211693788},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1629211696616},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1629211688771},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1629211694599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIDxkaXYgY2xhc3M9ImNvbHVtbnMgaXMtbW9iaWxlIj4NCiAgICA8ZGl2IGNsYXNzPSJjb2x1bW4gaXMtaGFsZiBpcy1vZmZzZXQtb25lLXF1YXJ0ZXIiPg0KICAgICAgPGRpdiBjbGFzcz0iZmllbGQiPg0KICAgICAgICA8ZGl2IGNsYXNzPSJjb250cm9sIj4NCiAgICAgICAgICA8dGV4dGFyZWENCiAgICAgICAgICAgIGNsYXNzPSJ0ZXh0YXJlYSBpcy1tZWRpdW0gaXMtcHJpbWFyeSINCiAgICAgICAgICAgIHBsYWNlaG9sZGVyPSJMZXQncyBsaXN0IHdoYXQgdG8gZG8gISEhIg0KICAgICAgICAgICAgaWQ9Im5vdGUiDQogICAgICAgICAgICB2LW1vZGVsPSJzdGF0ZS5ub3RlIg0KICAgICAgICAgID48L3RleHRhcmVhPg0KICAgICAgICA8L2Rpdj4NCiAgICAgIDwvZGl2Pg0KICAgICAgPGRpdiBjbGFzcz0iYnV0dG9ucyI+DQogICAgICAgIDxidXR0b24gY2xhc3M9ImJ1dHRvbiBpcy1wcmltYXJ5IiBAY2xpY2s9ImhhbmRsZUFkZE5vdGUiPg0KICAgICAgICAgIEFkZCBOb3Rlcw0KICAgICAgICA8L2J1dHRvbj4NCiAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KICA8L2Rpdj4NCg=="},{"version":3,"sources":["C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\src\\components\\CreateNote.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC/C,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAChB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACpC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACtC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UACrB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACb,CAAC,CAAC,CAAC,CAAC,CAAC;MACP,CAAC,CAAC,CAAC,CAAC,CAAC;MACL,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UACtD,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACV,CAAC,CAAC,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC","file":"C:/Users/Mahabub/PycharmProjects/techNotes_final/frontend/src/components/CreateNote.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div class=\"columns is-mobile\">\r\n    <div class=\"column is-half is-offset-one-quarter\">\r\n      <div class=\"field\">\r\n        <div class=\"control\">\r\n          <textarea\r\n            class=\"textarea is-medium is-primary\"\r\n            placeholder=\"Let's list what to do !!!\"\r\n            id=\"note\"\r\n            v-model=\"state.note\"\r\n          ></textarea>\r\n        </div>\r\n      </div>\r\n      <div class=\"buttons\">\r\n        <button class=\"button is-primary\" @click=\"handleAddNote\">\r\n          Add Notes\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, computed } from \"vue\";\r\nimport axios from \"axios\";\r\nimport { backend } from \"@/utils\";\r\nimport router from \"@/router\";\r\n\r\nexport default {\r\n  name: \"CreateNote\",\r\n  setup() {\r\n    const state = reactive({\r\n      note: null,\r\n    });\r\n    const handleAddNote = async (_) => {\r\n      try {\r\n           // Let's get the initial response first\r\n            // If it fails then I need to send the refresh token and try again\r\n            // If it fails again then that means the refresh token expired and I can log out the user\r\n        const response = await axios.post(\r\n          `${backend}/api/note/create`,\r\n          { content: state.note },\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.accessToken}`,\r\n            },\r\n          }\r\n        );\r\n        if (response.status === 200) {\r\n          console.log(\"note is added\");\r\n          Toastify({\r\n              text: \"Note added\",\r\n              duration: 3000,\r\n              destination: \"https://github.com/apvarun/toastify-js\",\r\n              newWindow: true,\r\n              close: true,\r\n              gravity: \"bottom\", // `top` or `bottom`\r\n              position: \"right\", // `left`, `center` or `right`\r\n              backgroundColor: \"linear-gradient(to right, #00b09b, #96c93d)\",\r\n              stopOnFocus: true, // Prevents dismissing of toast on hover\r\n              onClick: function(){} // Callback after click\r\n            }).showToast();\r\n          state.note = null;\r\n          await router.push({ name: \"Home\" });\r\n        }\r\n      } catch (err) {\r\n        if (err.status === 500) {\r\n          console.log(\"Check your internet connection!\");\r\n        } else {\r\n          try {\r\n            const refresh = await axios.post(`${backend}/api/token/refresh/`, {\r\n              refresh: localStorage.refreshToken,\r\n            });\r\n            await localStorage.setItem(\"accessToken\", refresh.data.access);\r\n            const refreshResponse = await axios.post(\r\n              `${backend}/api/note/create`,{ content: state.note },\r\n              {\r\n                headers: {\r\n                  Authorization: `Bearer ${localStorage.accessToken}`,\r\n                },\r\n              }\r\n            );\r\n            if (refreshResponse.status === 200) {\r\n              state.note = null;\r\n            }\r\n          } catch (err) {\r\n            localStorage.removeItem(\"accessToken\");\r\n            localStorage.removeItem(\"refreshToken\");\r\n            await router.push({ name: \"Login\" });\r\n          }\r\n        }\r\n      }\r\n    };\r\n    return {\r\n      state,\r\n      handleAddNote,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}