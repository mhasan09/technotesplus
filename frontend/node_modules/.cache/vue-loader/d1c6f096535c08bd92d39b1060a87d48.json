{"remainingRequest":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\src\\views\\Home.vue?vue&type=template&id=fae5bece","dependencies":[{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\src\\views\\Home.vue","mtime":1629204189244},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1629211688771},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1629211693788},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1629211696616},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1629211688771},{"path":"C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1629211694599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIDxkaXYgY2xhc3M9ImNvbnRhaW5lciI+DQogICAgPGRpdiBjbGFzcz0iY29sdW1ucyBpcy1tb2JpbGUiPg0KICAgICAgPGRpdiBjbGFzcz0iY29sdW1uIGlzLWhhbGYgaXMtb2Zmc2V0LW9uZS1xdWFydGVyIj4NCiAgICAgICAgPHN0cm9uZyBjbGFzcz0iZ3JlZXRpbmdzIj5IaSx7eyBzdGF0ZS51c2VyLnVzZXJuYW1lIH19PC9zdHJvbmc+DQogICAgICAgIDxwIGNsYXNzPSJtYi00Ij48L3A+DQogICAgICAgIA0KICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQogICAgPE5vdGUNCiAgICAgIHYtZm9yPSJub3RlIGluIHN0YXRlLm5vdGVzIg0KICAgICAgOmtleT0ibm90ZS5pZCINCiAgICAgIDppZD0ibm90ZS5pZCINCiAgICAgIDpub3RlPSJub3RlLkNPTlRFTlQiDQogICAgICBAcmVtb3ZlTm90ZT0iaGFuZGxlUmVtb3ZlTm90ZSINCiAgICAvPg0KICA8L2Rpdj4NCg=="},{"version":3,"sources":["C:\\Users\\Mahabub\\PycharmProjects\\techNotes_final\\frontend\\src\\views\\Home.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACpB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC5B,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9D,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;MAErB,CAAC,CAAC,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,CAAC;MACF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC1B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/B,CAAC;EACH,CAAC,CAAC,CAAC,CAAC,CAAC","file":"C:/Users/Mahabub/PycharmProjects/techNotes_final/frontend/src/views/Home.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"columns is-mobile\">\r\n      <div class=\"column is-half is-offset-one-quarter\">\r\n        <strong class=\"greetings\">Hi,{{ state.user.username }}</strong>\r\n        <p class=\"mb-4\"></p>\r\n        \r\n      </div>\r\n    </div>\r\n    <Note\r\n      v-for=\"note in state.notes\"\r\n      :key=\"note.id\"\r\n      :id=\"note.id\"\r\n      :note=\"note.CONTENT\"\r\n      @removeNote=\"handleRemoveNote\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, onMounted } from \"vue\";\r\nimport axios from \"axios\";\r\nimport Note from \"../components/Note.vue\";\r\nimport { backend } from \"@/utils\";\r\nimport router from \"@/router\";\r\nimport { useRouter } from \"vue-router\";\r\nexport default {\r\n  components: {\r\n    Note,\r\n  },\r\n\r\n  name: \"Notes\",\r\n  setup(props) {\r\n    const state = reactive({\r\n      notes: [],\r\n      user: [],\r\n    });\r\n\r\n    // We get all the notes for the user\r\n    const getNotes = async (_) => {\r\n      try {\r\n        const response = await axios.get(`${backend}/api/user/notes`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.accessToken}`,\r\n          },\r\n        });\r\n        if (response.status === 200) {\r\n          state.notes = response.data;\r\n        }\r\n      } catch (err) {\r\n        if (err.status === 500) {\r\n          //Throw error\r\n        } else {\r\n          try {\r\n            const refresh = await axios.post(`${backend}/api/token/refresh/`, {\r\n              refresh: localStorage.refreshToken,\r\n            });\r\n            localStorage.setItem(\"accessToken\", refresh.data.access);\r\n            const refreshResponse = await axios.get(\r\n              `${backend}/api/user/notes`,\r\n              {\r\n                headers: {\r\n                  Authorization: `Bearer ${refresh.data.access}`,\r\n                },\r\n              }\r\n            );\r\n            if (refreshResponse.status === 200) {\r\n              state.notes = refreshResponse.data;\r\n            }\r\n          } catch {\r\n            localStorage.removeItem(\"accessToken\");\r\n            localStorage.removeItem(\"refreshToken\");\r\n            await router.push({ name: \"Login\" });\r\n          }\r\n        }\r\n      }\r\n    };\r\n    onMounted(() => {\r\n      getNotes();\r\n    });\r\n\r\n    const getUser = async (_) => {\r\n      try {\r\n        const response = await axios.get(`${backend}/api/get_user`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.accessToken}`,\r\n          },\r\n        });\r\n        if (response.status === 200) {\r\n          state.user = response.data;\r\n        }\r\n      } catch (err) {\r\n        if (err.status === 500) {\r\n          //Throw error\r\n        } else {\r\n          try {\r\n            const refresh = await axios.post(`${backend}/api/token/refresh/`, {\r\n              refresh: localStorage.refreshToken,\r\n            });\r\n            localStorage.setItem(\"accessToken\", refresh.data.access);\r\n            const refreshResponse = await axios.get(`${backend}/api/get_user`, {\r\n              headers: {\r\n                Authorization: `Bearer ${refresh.data.access}`,\r\n              },\r\n            });\r\n            if (refreshResponse.status === 200) {\r\n              state.user = refreshResponse.data;\r\n            }\r\n          } catch {\r\n            localStorage.removeItem(\"accessToken\");\r\n            localStorage.removeItem(\"refreshToken\");\r\n            await router.push({ name: \"Login\" });\r\n          }\r\n        }\r\n      }\r\n    };\r\n    onMounted(() => {\r\n      getUser();\r\n    });\r\n\r\n    // Note component sends us the Id of the deleted note and we just remove\r\n    // it from the list\r\n    // const handleRemoveNote = childData => state.notes = state.notes.filter(note => note.id !== childData.id );\r\n    const handleRemoveNote = (childData) => {\r\n      state.notes = state.notes.filter((note) => note.id !== childData.id);\r\n    };\r\n\r\n    return {\r\n      state,\r\n      handleRemoveNote,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.greetings {\r\n  font-size: 23px;\r\n}\r\n.is-right{\r\n  margin-right: 5%;\r\n}\r\n</style>"]}]}